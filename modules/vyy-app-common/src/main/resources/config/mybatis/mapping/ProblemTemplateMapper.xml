<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.vyiyun.common.weixin.dao.ProblemTemplateMapper">

	<resultMap id="result" type="ProblemTemplate">
		<result property="id" column="ID" />
		<result property="corpId" column="CorpId" />
		<result property="appraisalId" column="AppraisalId" />
		<result property="quota" column="Quota" />
		<result property="standard" column="Standard" />
		<result property="scores" column="Scores" jdbcType="INTEGER" />
	</resultMap>

	<!-- 添加请假记录 -->
	<insert id="addProblemTemplate" parameterType="java.util.List">
		INSERT INTO tb_problem_template
		(ID,CorpId,AppraisalId,Quota,Standard,Scores,Px)
		VALUES
		<foreach collection="list" item="item" index="index"
			separator=",">
			(#{item.id},#{item.corpId},#{item.appraisalId},#{item.quota},#{item.standard},#{item.scores,jdbcType=INTEGER},${index+1})
		</foreach>
	</insert>

	<!-- 获取请假信息 -->
	<select id="getProblemTemplate" parameterType="com.vyiyun.weixin.model.SqlQueryParameter"
		resultMap="result">
		SELECT * FROM tb_problem_template
		<where>
			1 = 1
			<if test="parameter.id != null">
				and ID = #{parameter.id}
			</if>
			<if test="parameter.corpId != null and parameter.corpId != ''">
				and CorpId = #{parameter.corpId}
			</if>
			<if test="parameter.appraisalId != null and parameter.appraisalId != ''">
				and AppraisalId = #{parameter.appraisalId}
			</if>
		</where>
		<if test="keyValMap.orderBy != null">
			ORDER BY ${keyValMap.orderBy}
		</if>
	</select>
	<delete id="deleteProblemTemplate" parameterType="ProblemTemplate">
	     DELETE FROM tb_problem_template
		<where>
			<if test="id != null">
				ID = #{id}
			</if>
			<if test="appraisalId != null and appraisalId != ''">
				and AppraisalId = #{appraisalId}
			</if>
		</where>
	</delete>
</mapper>